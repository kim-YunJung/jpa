## Me
java, jpa / reactë¥¼ ì‚¬ìš©í•´ì„œ snsê¸°ëŠ¥ì„ ë§Œë“¤ê³  ì‹¶ì–´ ì‚¬ì§„ì„ ì²¨ë¶€í•˜ê³  ì‚¬ì§„ê³¼ ë‚´ìš©ì„ ëª©ë¡ìœ¼ë¡œ ë³´ì—¬ì£¼ê³  ì¢‹ì•„ìš”ì™€ ì‹«ì–´ìš”ë¥¼ ëˆ„ë¥¼ ìˆ˜ ìˆê³  ëŒ“ê¸€ê³¼ ëŒ€ëŒ“ê¸€ì„ ë‹¬ ìˆ˜ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ì–´. ì‚¬ì§„ì— ë”°ë¼ì„œëŠ” ë¹„ê³µê°œê¸€ë¡œ ì‘ì„±ì´ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì„±í•´ì¤˜

## AI Assistant
ìœ„ì˜ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Reactì™€ JPA(Spring Boot)ë¥¼ ì‚¬ìš©í•´ì„œ SNS ê¸°ëŠ¥ì„ ë§Œë“œëŠ” í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ì„¤ê³„í•˜ê³ , í•„ìš”í•œ ì£¼ìš” êµ¬í˜„ ë‚´ìš©ì„ ê°„ëµíˆ ì œê³µí•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ì‚¬ì§„ ì²¨ë¶€, ê²Œì‹œê¸€ ëª©ë¡, ì¢‹ì•„ìš”/ì‹«ì–´ìš”, ëŒ“ê¸€, ëŒ€ëŒ“ê¸€, ë¹„ê³µê°œ ê¸°ëŠ¥ì„ í¬í•¨í•©ë‹ˆë‹¤.

---

## **í”„ë¡œì íŠ¸ êµ¬ì¡°**
### 1. **ë°±ì—”ë“œ (Java + Spring Boot + JPA)**

#### ì—”í‹°í‹° ì„¤ê³„
1. **Post (ê²Œì‹œê¸€)**
   - ì‚¬ì§„, ê¸€ ë‚´ìš©, ìƒíƒœ(ê³µê°œ/ë¹„ê³µê°œ)

2. **User (ì‚¬ìš©ì)**
   - ì‘ì„±ìë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•œ ì—”í‹°í‹°

3. **Comment (ëŒ“ê¸€)**
   - ê²Œì‹œê¸€ì— ë‹¬ë¦¬ëŠ” ëŒ“ê¸€
   - ëŒ€ëŒ“ê¸€ì„ ìœ„í•œ `parent` í•„ë“œ í¬í•¨

4. **Reaction (ì¢‹ì•„ìš”/ì‹«ì–´ìš”)**
   - íŠ¹ì • ì‚¬ìš©ìì˜ ë°˜ì‘ì„ ì €ì¥

---

### **ì˜ˆì œ ì—”í‹°í‹°**

```java
package com.example.sns.entity;

import jakarta.persistence.*;
import lombok.Getter;
import lombok.Setter;

import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;

@Entity
@Getter
@Setter
public class Post {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String content;           // ê¸€ ë‚´ìš©

    private String photoUrl;          // ì‚¬ì§„ ê²½ë¡œ

    @Enumerated(EnumType.STRING)
    private PostVisibility visibility; // ê³µê°œ/ë¹„ê³µê°œ ìƒíƒœ

    private LocalDateTime createdAt;  // ì‘ì„± ì‹œê°„

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id")
    private User user;                // ì‘ì„±ì

    @OneToMany(mappedBy = "post", cascade = CascadeType.ALL, orphanRemoval = true)
    private List<Comment> comments = new ArrayList<>(); // ëŒ“ê¸€

    @OneToMany(mappedBy = "post", cascade = CascadeType.ALL, orphanRemoval = true)
    private List<Reaction> reactions = new ArrayList<>(); // ì¢‹ì•„ìš”/ì‹«ì–´ìš”
}

enum PostVisibility {
    PUBLIC,
    PRIVATE
}
```

#### ëŒ“ê¸€ê³¼ ëŒ€ëŒ“ê¸€
```java
@Entity
@Getter
@Setter
public class Comment {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String content;  // ëŒ“ê¸€ ë‚´ìš©

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_id")
    private User user;       // ì‘ì„±ì

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "post_id")
    private Post post;       // ëŒ€ìƒ ê²Œì‹œê¸€

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "parent_id")
    private Comment parent;  // ë¶€ëª¨ ëŒ“ê¸€ (ëŒ€ëŒ“ê¸€ì¸ ê²½ìš°)

    @OneToMany(mappedBy = "parent", cascade = CascadeType.ALL, orphanRemoval = true)
    private List<Comment> replies = new ArrayList<>(); // ëŒ€ëŒ“ê¸€
}
```

#### Reaction ì—”í‹°í‹°
```java
@Entity
@Getter
@Setter
public class Reaction {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Enumerated(EnumType.STRING)
    private ReactionType reactionType; // ì¢‹ì•„ìš” or ì‹«ì–´ìš”

    @ManyToOne(fetch = FetchType.LAZY)
    private User user;  // ë°˜ì‘í•œ ì‚¬ìš©ì

    @ManyToOne(fetch = FetchType.LAZY)
    private Post post;  // ëŒ€ìƒ ê²Œì‹œê¸€
}

public enum ReactionType {
    LIKE,
    DISLIKE
}
```

---

### 2. **í”„ë¡ íŠ¸ì—”ë“œ (React)**

#### React êµ¬ì¡°
1. **ë¼ìš°íŒ…**: React Routerë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±
   - `/posts`: ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸
   - `/posts/:postId`: ê²Œì‹œê¸€ ìƒì„¸í˜ì´ì§€
   - `/login` ë° `/signup`: ì‚¬ìš©ì ë¡œê·¸ì¸/íšŒì›ê°€ì…

2. **ì»´í¬ë„ŒíŠ¸**
   - **PostList**: ê²Œì‹œê¸€ ëª©ë¡
   - **PostDetail**: ê²Œì‹œê¸€ ìƒì„¸
   - **Comment**: ëŒ“ê¸€ ë° ëŒ€ëŒ“ê¸€ ì»´í¬ë„ŒíŠ¸
   - **PostForm**: ê²Œì‹œê¸€ ì‘ì„±(ì´ë¯¸ì§€ ì—…ë¡œë“œ í¬í•¨)
   
#### ì˜ˆì œ ì½”ë“œ: ê²Œì‹œê¸€ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
```textmate
import React, { useEffect, useState } from "react";
import axios from "axios";

const PostList = () => {
  const [posts, setPosts] = useState([]);

  useEffect(() => {
    fetchPosts();
  }, []);

  const fetchPosts = async () => {
    try {
      const response = await axios.get("/api/posts"); // ë°±ì—”ë“œ API í˜¸ì¶œ
      setPosts(response.data);
    } catch (error) {
      console.error("ê²Œì‹œê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", error);
    }
  };

  return (
    <div>
      <h1>ê²Œì‹œê¸€ ëª©ë¡</h1>
      <ul>
        {posts.map((post) => (
          <li key={post.id}>
            <img src={post.photoUrl} alt="" style={{ width: "100px" }} />
            <p>{post.content}</p>
          </li>
        ))}
      </ul>
    </div>
  );
};

export default PostList;
```

---

### 3. **API ì„¤ê³„**

| **URL**                | **HTTP ë©”ì„œë“œ** | **ê¸°ëŠ¥**                  |
|-----------------------|----------------|-------------------------|
| `/api/posts`          | GET            | ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ             |
| `/api/posts`          | POST           | ê²Œì‹œê¸€ ì‘ì„±               |
| `/api/posts/:id`      | GET            | ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°             |
| `/api/posts/:id/reactions` | POST           | ì¢‹ì•„ìš”/ì‹«ì–´ìš” ë“±ë¡         |
| `/api/posts/:id/comments`  | POST           | ëŒ“ê¸€ ì‘ì„± (ëŒ€ëŒ“ê¸€ í¬í•¨)      |

---

### 4. **ë¹„ê³µê°œ ê²Œì‹œê¸€ ì²˜ë¦¬**
ë°±ì—”ë“œì—ì„œ `@PreAuthorize` ë˜ëŠ” ì‚¬ìš©ì ì¸ì¦(Authorization) ë¡œì§ì„ ì ìš©í•˜ì—¬ ë¹„ê³µê°œ ê²Œì‹œê¸€ì€ ì‘ì„±ì ë³¸ì¸ë§Œ ë³¼ ìˆ˜ ìˆë„ë¡ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```java
@RestController
@RequestMapping("/api/posts")
@RequiredArgsConstructor
public class PostController {
    private final PostRepository postRepository;

    @GetMapping
    public List<Post> getPosts() {
        // ê³µê°œëœ ê²Œì‹œê¸€ë§Œ ë°˜í™˜
        return postRepository.findByVisibility(PostVisibility.PUBLIC);
    }
}
```

---

êµ¬í˜„ ì‹œ ì¶”ê°€ì ì¸ ìƒì„¸ì‚¬í•­ì´ë‚˜ íŠ¹ì • ê¸°ëŠ¥ì— ëŒ€í•´ ì§ˆë¬¸ì´ ìˆìœ¼ë©´ í¸í•˜ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”! ğŸ˜Š
